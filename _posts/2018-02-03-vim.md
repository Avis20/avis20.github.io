---
title: vim
tags: [vim, tools]
reference:
  - link: https://coderwall.com/p/xvryda/use-your-own-vimrc-when-using-sudo
    title: use-your-own-vimrc-when-using-sudo

  - link: https://www.youtube.com/channel/UC6WoOFmr4zhuUdVK9Hgh0tA/featured
    title: "Dev Talk"

---

* TOC 
{:toc}

## Vim: Свой конфиг под судо

<pre><code class="perl">
sudo -E vim /etc/some_conf_file
</code></pre>

## Как заставить Vim отображать русские символы, если локаль не UTF8?
<pre><code class="perl">
set fileencoding=utf-8
set encoding=utf-8
set termencoding=utf-8
</code></pre>

## Перейти на строку при открытии
<pre><code class="perl">
vim ~/.ssh/known_hosts +2
</code></pre>
где ++2 - номер строки  

## Комбинации

<ul>
    <li><b>wdb</b> - удалить слово находясь в любом месте слова </li>
    <li><b>0w</b> - переместиться к началу строки где есть текст</li>
    <li><b>ggcG</b> - удалить все содержимое файла и включить режим редактирования</li>
</ul>

<hr>  

## Управление

### Перемещение курсора

<table>
    <tr>
        <td><b>h</b> - переместить курсор в лево</td>
        <td><b>k</b> - переместить курсор в вверх</td>
    </tr>
    <tr>
        <td><b>l</b> - переместить курсор в право</td>
        <td><b>j</b> - переместить курсор в вниз</td>
    </tr>
    <tr><th>По строке</th></tr>
    <tr>
        <td><b>0</b> - переместиться к началу строки</td>
        <td><b>$</b> - переместиться к концу строки</td>
    </tr>
    <tr>
        <td><b>e</b> - переместиться к последнему символу след. слова</td>
        <td><b>b</b> - переместиться к первому символу пред. слова</td>
    </tr>
    <tr>
        <td><b>w</b> - переместиться к началу след. слова</td>
        <td><b>b</b> - переместиться к началу пред. слова</td>
    </tr>
    <tr><th>По экрану</th></tr>
    <tr>
        <td><b>gg</b> - переместиться к началу файла</td>
        <td><b>G</b> - переместиться к концу файла</td>
    </tr>
    <tr>
        <td><b>H</b> - переместить курсор к началу экрана</td>
        <td><b>L</b> - переместить курсор к концу экрана</td>
    </tr>
    <tr>
        <td><b>M</b> - переместить курсор к середине экрана</td>
    </tr>
    <tr>
        <td><b>Ctrl+f</b> - переместиться к концу экрана</td>
        <td><b>Ctrl+b</b> - переместиться к концу экрана</td>
    </tr>
    <tr>
        <td><b>:14</b> - переместиться к строке 14. Не работает в st3</td>
    </tr>
</table>

### Редактирование текста

<table>
    <tr><th>Удаление</th></tr>
    <tr>
        <td><b>x</b> - удалить символ под курсором</td>
        <td><b>X</b> - удалить символ до курсора</td>
    </tr>
    <tr>
        <td><b>dd</b> - удалить строку под курсором</td>
    </tr>
    <tr>
        <td><b>dw (delete word)</b> - удалить от места под курсором до конца слова</td>
        <td><b>de</b> - удалить от места под курсором до конца слова НЕ включая след. пробел</td>
    </tr>
    <tr>
        <td><b>d$ (или D)</b> - удалить от места под курсором до конца строки</td>
        <td><b>d^</b> - удалить от места под курсором до начала строки</td>
    </tr>
    <tr><th>Вставка</th></tr>
    <tr>
        <td><b>i</b> - вставить текст под курсором</td>
        <td><b>a</b> - вставить текст перед курсором</td>
    </tr>
    <tr>
        <td><b>I</b> - вставить текст в начале строки</td>
        <td><b>A</b> - вставить текст в конце строки</td>
    </tr>
    <tr>
        <td><b>o</b> - вставить пустую строку ниже текущей</td>
        <td><b>O</b> - вставить пустую строку выше текущей</td>
    </tr>
    <tr><th>Замена</th></tr>
    <tr>
        <td><b>r</b> - заменить символ под курсором</td>
        <td><b>R</b> - заменить несколько символов под курсором</td>
    </tr>
    <tr><th>Изменение</th></tr>
    <tr>
        <td><b>ce</b> - изменить слово от символа под курсором до конца слова</td>
        <td><b>cb</b> - изменить слово от символа под курсором до начала слова</td>
    </tr>
</table>


### Поиск

<table>
    <tr><th>Поиск слов</th></tr>
    <tr>
        <td><b>/</b> - включение режима поика</td>
    </tr>
    <tr>
        <td><b>n</b> - след. вхождение поиска</td>
    </tr>
    <tr>
        <td><b>N</b> - пред. вхождение поиска</td>
    </tr>
    <tr><th>Поиск парных скобок</th></tr>
    <tr>
        <td><b>%</b> - ищет парную скобку под курсором</td>
    </tr>
</table>

### Копирование и вставка 

<table>
    <tr>
        <td><b>yw</b> - копировать слово в буфер</td>
    </tr>
    <tr>
        <td><b>p</b> - вставить данные из буфера, перед курсором</td>
        <td><b>P</b> - вставить данные из буфера, после курсора</td>
    </tr>
</table>

### Найти и заменить

<table>
    <tr>
        <td><b>:s/foo/bar</b> - заменит первое найденое foo на bar</td>
        <td><b>:s/foo/bar/g</b> - заменит найденое foo на bar во всей строке</td>
    </tr>
    <tr>
        <td><b>:%s/foo/bar</b> - заменит первое найденое foo на bar в каждой строке</td>
        <td><b>:%s/foo/bar/g</b> - заменит найденое foo на bar во всем файле</td>
    </tr>
    <tr>
        <td><b>:%s/foo/bar/gc</b> - поиск и замена с подтверждением.
            <ul>
                <li>y - да, заменить</li>
                <li>n - нет, не заменять</li>
                <li>a - заменить все</li>
                <li>q - отменить замену</li>
                <li>l - заменить и выйти</li>
            </ul>
        </td>
    </tr>
</table>

### Сохранение файла

<table>
    <tr>
        <td><b>:w TEST</b> - Сохранить файл с именем TEST</td>
        <td><b>:wq</b> - Сохранить и выйти</td>
    </tr>
    <tr><th>Сохранить фрагмент</th></tr>
    <tr>
        <td><b>v :w TEST</b> - выделить фрагмент текста и сохранить в файл TEST</td>
    </tr>
    <tr><th>Вставить содержимое файла под курсор</th></tr>
    <tr>
        <td><b>:r TEST</b> - вставит содержимое файла TEST</td>
        <td><b>:r !ls</b> - вставит вывод команды под курсор</td>
    </tr>
</table>

### Установки и параметры

<table>
    <tr>
        <td><b>:set ic</b> - игнорировать регистр при поиске</td>
        <td><b>:set noic</b> - НЕ игнорировать регистр при поиске</td>
    </tr>
    <tr>
        <td><b>:set number</b> - показать номера строк</td>
        <td><b>:set nonumber</b> - НЕ показывать номера строк</td>
    </tr>
</table>

### Разное

#### Обычный режим

<table>
    <tr>
        <td><b>Ctrl+a</b> - Увеличивает число на 1</td>
        <td><b>Ctrl+x</b> - Уменьшает число на 1</td>
    </tr>
    <tr>
        <td><b>Ctrl+o</b> - переместиться на пред. положение</td>
        <td><b>Ctrl+i</b> - переместиться на след. положение</td>
    </tr>
    <tr>
        <td><b>q:</b> - история команд</td>
        <td><b>q/</b> - история команд + поиск</td>
    </tr>
</table>

<table>
    <tr>
        <td><b>J</b> - "Склеивает" строку с пред. строкой</td>
        <td><b>Ctrl+g</b> - информация о файле, название, положение</td>
    </tr>
    <tr><th>Отмена изменений</th></tr>
        <td><b>u</b> - отменить последнее действие</td>
        <td><b>U</b> - отменить несколько последних действий. Не работает в st3</td>
    </tr>
    <tr>
        <td><b>Ctrl+R</b> - отменить отмену. Не работает в st3</td>
    </tr>
    <tr>
        <td><b>:!</b> - выполнить внешнюю команду</td>
    </tr>
</table>

