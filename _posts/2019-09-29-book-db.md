---
title: "Заметки по книге - Системы баз данных Полный курс"
tags: [book, database]
reference:
  - title:
    link:
---

* TOC 
{:toc}

## ERWin - tutorial

### Постановка задачи

В пункте обмена <b>валют</b> создается локальная информационная система, призванная автоматизировать процесс учета <b>сделок</b> купли – продажи <b>валюты</b>.  
Создаваемая система должна обеспечивать ввод, хранение и поиск информации о <b>сделках</b>, совершенных в данном пункте обмена.

Каждой <b>сделке</b> присваивается уникальный цифровой код.
Информация о <b>сделке</b> должна содержать сведения о дате и времени сделки, суммах покупаемой и продаваемой валют, фамилии, имени, отчестве и номере паспорта <b>клиента</b>, а так же о фамилии, инициалах и учетном номере личного дела <b>кассира</b> в отделе кадров.

Система должна позволять вычислить денежный оборот за один или несколько дней, а так же осуществлять поиск информации о <b>сделках</b> по номеру паспорта <b>клиента</b>.  

Задача состоит в проектировании структуры баз данных разрабатываемой автоматизированной ИС

#### 0) Кандидаты в сущности

* Валюта
* Сделка
* Клиент
* Кассир

#### 1) Связи

Для создания связей между сущностями сначала составим описание данной предметной области при помощи ряда истинных высказываний на естественном языке:

* Любой КЛИЕНТ должен совершить одну или несколько СДЕЛОК.
* Каждую СДЕЛКУ должен совершить один КЛИЕНТ.
* Любой КАССИР может обслуживать одну или несколько СДЕЛОК, но может не обслужить и ни одной.
* Каждую СДЕЛКУ должен обслуживать только один КАССИР.
* Любая ВАЛЮТА может покупаться и продаваться при разных СДЕЛКАХ.
* При совершении СДЕЛКИ должна покупаться одна ВАЛЮТА и продаваться другая ВАЛЮТА.

Таким образом, сформируем имена связей:
* КЛИЕНТ совершает СДЕЛКУ.
* КАССИР обслуживает СДЕЛКУ.
* ВАЛЮТА покупается при СДЕЛКЕ.
* ВАЛЮТА продается при СДЕЛКЕ.
Все четыре связи являются связями «один-ко-многим». Во всех четырех случаях 
сущность СДЕЛКА является дочерней

#### 2) Атрибуты

СДЕЛКА:
* Код сделки PK
* дата и временя сделки
* суммах покупаемой валюты
* валют продаваемой валюты

КЛИЕНТ:
* Номер клиента PK
* фамилия
* имя
* отчество
* номере паспорта AK

КАССИР
* Номер кассира PK
* фамилия
* инициалы
* учетный номер личного дела

ВАЛЮТА:
* Код валюты PK
* Название валюты


# Упражнения

## 2.1.1

Расмотрим проект БД банка, содежращей информацию о клиентах (назовем это множество сущностей <b>Clients</b>) и состоянии их счетов (<b>Accounts</b>). 

Данные о клиенте включают его имя (<b>name</b>), адрес (<b>address</b>), номер телефона (<b>phone</b>) и код полиса социального страхования (<b>ssnumber</b>).

Счет описывается атрибутами номера (<b>number</b>), типа (например "накопительный" "чековый", и т.п. (<b>type</b>)) и остатка (<b>balance</b>).

Необходимо также отобразить в БД факт принадлежности счета определенному клиенту. 

Начертите ER-диаграмму, соответвующую такой БД. Незабудте описать типы связей

#### 0) Кандидаты в сущности

* Клиент (Client)
* Счет (Account)

#### 1) Связи

* Любой КЛИЕНТ может иметь (или может не иметь) СЧЕТ в банке
* СЧЕТ должен принадлежать одному КЛИЕНТУ

Итого

* КЛИЕНТ имеет СЧЕТ
* СЧЕТ принадлежит КЛИЕНТУ

#### 2) Атрибуты

Клиент:
* Номер клиента (client.id)
* Имя клиента (client.name)
* Адрес клиента (client.address)
* Номер телефона клиента (client.phone)
* Полис клиента (client.ssnumber)

Счет:
* Код счета (account.id)
* Номер счета (account.number)
* Тип счета (account.type)
* Баланс счета (account.balance)

<img src="/static/img/books/erwin/ex1.png" alt="">

## 2.1.2

Исправте решение упр. 2.1.1 след. образом:
+ измените диаграмму в предположении, что счет может принадлежать только одному клиенту; 
+ измените диаграмму, предусматривая, что клиент может открыть в банке только один счет
+ измените исходную диаграмму, полученную в результате упраженния 2.1.2, в предположении, что клиент может иметь несколько адресов, описываемых кортежами вида "улица-город-страна", и множество номеров телефонов. Имейте в виду, что в рамках ER-модели вы не вправе использовать атрибуты типов, таких как множества, не являющимися атомарными.

## 2.1.3

Представьте в виде ER-диаграммы структуру "фудбольной" базы данных, охватывающую информацию о командах, об игроках и о болельщиках, включая след. атрибуты

1. Для каждой команды - название, перечень имен игроков, имя капитана (из числа игроков), цвета формы
2. Для каждого игрока - имя
3. Для каждогов больельщика - имя, название комманды, имя любимого игрока и предпочитаемый цвет.

